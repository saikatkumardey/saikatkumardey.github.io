<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Beyond F1: using the Fbeta_score for better model evaluation - Saikat Kumar Dey</title><meta name=description content="Learn how to use the Fbeta_score, a powerful and flexible evaluation metric for classification tasks that allows the user to adjust the balance between precision and recall."><meta name=author content="Saikat Kumar Dey"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Saikat Kumar Dey","url":"https:\/\/saikatkumardey.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/saikatkumardey.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/saikatkumardey.com","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/saikatkumardey.com\/post\/fbeta\/","name":"Beyond f1 using the fbeta score for better model evaluation"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Saikat Kumar Dey"},"headline":"Beyond F1: using the Fbeta_score for better model evaluation","description":"Learn how to use the Fbeta_score, a powerful and flexible evaluation metric for classification tasks that allows the user to adjust the balance between precision and recall.","inLanguage":"en","wordCount":567,"datePublished":"2022-12-01T21:08:28","dateModified":"2022-12-01T21:08:28","image":"https:\/\/saikatkumardey.com","keywords":[""],"mainEntityOfPage":"https:\/\/saikatkumardey.com\/post\/fbeta\/","publisher":{"@type":"Organization","name":"https:\/\/saikatkumardey.com","logo":{"@type":"ImageObject","url":"https:\/\/saikatkumardey.com","height":60,"width":60}}}</script><meta property="og:url" content="https://saikatkumardey.com/post/fbeta/"><meta property="og:type" content="website"><meta property="og:site_name" content="Saikat Kumar Dey"><link rel=apple-touch-icon sizes=180x180 href=https://saikatkumardey.com/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://saikatkumardey.com/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://saikatkumardey.com/favicon/favicon-16x16.png><meta name=generator content="Hugo 0.115.4"><link rel=alternate href=https://saikatkumardey.com/index.xml type=application/rss+xml title="Saikat Kumar Dey"><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link rel=stylesheet href=https://saikatkumardey.com/css/main.css><link disabled id=dark-mode-theme rel=stylesheet href=https://saikatkumardey.com/css/dark.css><link rel=stylesheet href=https://saikatkumardey.com/css/highlight.min.css><link rel=stylesheet href=https://saikatkumardey.com/css/codeblock.css></head><body><div class="container fixed-top"><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-10 col-xl-10"><nav class="navbar navbar-expand-lg navbar-light fixed-top p-0"><div class=container><a class="navbar-brand fw-bold" href=https://saikatkumardey.com>Saikat Kumar Dey</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class="navbar-nav mb-2 mb-lg-0"><li class=nav-item><a class=nav-link title=Home href=/>Home</a></li><li class=nav-item><a class=nav-link title=Projects href=/projects/>Projects</a></li><li class=nav-item><a class=nav-link title=Now href=/now/>Now</a></li><li class="nav-item nav-link"><a id=dark-mode-toggle class="bi bi-sun"></a></li></ul></div></div></nav></div></div></div><header class=header-section><div class="intro-header no-img mt-10"><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-8 col-xl-8"><div class="col-sm-12 col-md-12 col-lg-12 col-xl-12"><div class=post-heading><h1 class="fw-semibold display-5 lh-1 mb-3">Beyond F1: using the Fbeta_score for better model evaluation</h1><span class=post-meta>&nbsp;December 1, 2022</span></div></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1"><div class="card-image card-image-blog p-0"></div></div><div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-4"><article role=main class=blog-post><p>Hey everyone!</p><p>Today I want to talk about a little-known evaluation metric: Fbeta_score.</p><p>If you&rsquo;re familiar with machine learning, you&rsquo;ve probably heard of F1 score. It&rsquo;s a common metric used to evaluate the performance of classification models, and it&rsquo;s defined as the harmonic mean of precision and recall. This is great for a lot of tasks, but there are some situations where F1 score might not be the best choice.</p><p>Enter Fbeta_score. It&rsquo;s similar to F1 score, but it allows you to adjust the balance between precision and recall by changing the value of beta. This can be useful in situations where you want to emphasize one of these metrics over the other.</p><p>For example, let&rsquo;s say you&rsquo;re training a model to predict whether an image contains a cat or a dog. If you&rsquo;re using F1 score, you&rsquo;re treating precision and recall equally, but what if you want to put more emphasis on recall? This is where Fbeta_score comes in handy. By setting beta to a value greater than 1, you can increase the weight of recall in the metric, and by setting it to a value less than 1, you can decrease the weight of recall.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>Fbeta_score <span style=font-weight:700>=</span> (<span style=color:#099>1</span> <span style=font-weight:700>+</span> beta<span style=font-weight:700>^</span><span style=color:#099>2</span>) <span style=font-weight:700>*</span> (precision <span style=font-weight:700>*</span> recall) <span style=font-weight:700>/</span> (beta<span style=font-weight:700>^</span><span style=color:#099>2</span> <span style=font-weight:700>*</span> precision <span style=font-weight:700>+</span> recall)
</span></span></code></pre></div><p>where precision is the fraction of true positives over the sum of true positives and false positives, and recall is the fraction of true positives over the sum of true positives and false negatives.</p><p><strong>How to choose a beta?</strong></p><p><strong>beta = 1</strong>
When beta=1, the Fbeta_score is equivalent to the F1 score, which treats precision and recall equally. This is a good default value to use if you don&rsquo;t have any specific preferences or requirements regarding the balance between precision and recall.</p><p><strong>beta &lt; 1</strong>
If you want to emphasize precision over recall, you can use a value of beta less than 1. For example, setting beta=0.5 will give precision twice as much weight as recall in the metric. This can be useful if you want to minimize the number of false positives, or if the cost of a false positive is higher than the cost of a false negative.</p><p><strong>beta > 1</strong>
On the other hand, if you want to emphasize recall over precision, you can use a value of beta greater than 1. For example, setting beta=2 will give recall twice as much weight as precision in the metric. This can be useful if you want to maximize the number of true positives, or if the cost of a false negative is higher than the cost of a false positive.</p><p>In general, the best value of beta to use will depend on the specific goals and requirements of the task at hand. By experimenting with different values of beta, you can find the setting that produces the best results for your specific dataset and task.</p><p>Here&rsquo;s how to use Fbeta_score in Python:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>from</span> <span style=color:#555>sklearn.metrics</span> <span style=font-weight:700>import</span> fbeta_score
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Generate some predictions</span>
</span></span><span style=display:flex><span>y_pred <span style=font-weight:700>=</span> [<span style=color:#099>1</span>, <span style=color:#099>0</span>, <span style=color:#099>1</span>, <span style=color:#099>1</span>, <span style=color:#099>0</span>, <span style=color:#099>0</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Compute the Fbeta_score</span>
</span></span><span style=display:flex><span>fbeta_score(y_true, y_pred, beta<span style=font-weight:700>=</span><span style=color:#099>1.0</span>)
</span></span></code></pre></div><p>In the code above, y_pred is a list of binary predictions, and y_true is a list of ground-truth labels. We can then use the fbeta_score function from scikit-learn to compute the Fbeta_score. By default, this will compute the F1 score (i.e. beta=1.0), but you can adjust the value of beta to change the balance between precision and recall.</p></article></div></div><div class=row><div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1"><hr></div><div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-2"></div><div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-4"><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><div><p class="list-inline footer-links">Use the share button below if you liked it.</p></div><ul class=share><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fsaikatkumardey.com%2fpost%2ffbeta%2f" target=_blank title="Share on Facebook"><i class="bi bi-facebook facebook-color"></i></a></li><li><a href="//twitter.com/share?url=https%3a%2f%2fsaikatkumardey.com%2fpost%2ffbeta%2f&amp;text=Beyond%20F1%3a%20using%20the%20Fbeta_score%20for%20better%20model%20evaluation&amp;via=map%5bemail%3asample%40gmail.com%20facebook%3ausername%20github%3asaikatkumardey%20linkedin%3asaikatkumardey%20name%3aSaikat%20Kumar%20Dey%20twitter%3asaikatkrdey%20website%3ahttps%3a%2f%2fsaikatkumardey.com%2f%20youtube%3a%5d" target=_blank title="Share on Twitter"><i class="bi bi-twitter twitter-color"></i></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fsaikatkumardey.com%2fpost%2ffbeta%2f&amp;title=Beyond%20F1%3a%20using%20the%20Fbeta_score%20for%20better%20model%20evaluation" target=_blank title="Share on Reddit"><i class="bi bi-reddit reddit-color"></i></a></li><li><a href="whatsapp://send?text=https%3a%2f%2fsaikatkumardey.com%2fpost%2ffbeta%2f&amp;description=Beyond%20F1%3a%20using%20the%20Fbeta_score%20for%20better%20model%20evaluation" target=_blank rel=noopener title="Share on WhatsApp"><i class="bi bi-whatsapp whatsapp-color"></i></a></li></ul></div></div></section></div><div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-4"><ul class="list-group list-group-horizontal" style=flex-direction:row><li class="list-group-item b-0"><a type=button class="btn btn-dark" role=button href=https://saikatkumardey.com/post/focal-loss/ data-toggle=tooltip data-placement=top title="Solving Class Imbalance with Focal Loss">&larr;
Previous Post</a></li><li class="list-group-item ms-auto b-0"><a type=button class="btn btn-dark" role=button href=https://saikatkumardey.com/post/nlp-from-rules-to-vector/ data-toggle=tooltip data-placement=top title="From Rules to Vectors: How NLP Changed Over Time">Next Post
&rarr;</a></li></ul></div><div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-4"></div></div></div><div><div class=container><div class=row></div></div></div></div></div><footer><div class=container><div class=row><div class=col-md-12><ul class="list-inline list-group list-group-horizontal text-center footer-links d-flex justify-content-center flex-row"><li><a href=mailto:sample@gmail.com title="Email me" target=_blank><span class=mx-2><i class="bi bi-envelope"></i></span></a></li><li><a href=https://www.facebook.com/username title=Facebook target=_blank><span class=mx-2><i class="bi bi-facebook"></i></span></a></li><li><a href=https://github.com/saikatkumardey title=GitHub target=_blank><span class=mx-2><i class="bi bi-github"></i></span></a></li><li><a href=https://twitter.com/saikatkrdey title=Twitter target=_blank><span class=mx-2><i class="bi bi-twitter"></i></span></a></li><li><a href=https://linkedin.com/in/saikatkumardey title=LinkedIn target=_blank><span class=mx-2><i class="bi bi-linkedin"></i></span></a></li><li><a href=https://www.youtube.com/ title=Youtube target=_blank><span class=mx-2><i class="bi bi-youtube"></i></span></a></li></ul></div></div><div class=row><div class=col-md-12><p class="credits copyright text-muted"><a href=https://saikatkumardey.com/>Saikat Kumar Dey</a>
&nbsp;&bull;&nbsp;&copy;
2023
&nbsp;&bull;&nbsp;
<a href=https://saikatkumardey.com>Saikat Kumar Dey</a></p><p class="credits theme-by text-muted">Powered by <a href=https://gohugo.io>Hugo</a> & <a href=https://github.com/binokochumolvarghese/lightbi-hugo>Lightbi.</a>&nbsp; Made with ❤ by <a href=https://binovarghese.com>Bino</a></p></div></div></div></footer><script src=https://code.jquery.com/jquery-3.7.0.slim.min.js integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js integrity=sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ crossorigin=anonymous></script>
<script src=https://saikatkumardey.com/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script src=https://saikatkumardey.com/js/dark-mode.js></script></body></html>